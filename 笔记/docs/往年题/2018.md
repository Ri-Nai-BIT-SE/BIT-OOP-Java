# 北京理工大学2019－2020学年第二学期2018级面向对象程序设计（Java语言）期末试题（A卷）
班级________ 学号________ 姓名________ 成绩________

## 一、填空题（每空1分，共10分）
1. Java中的`垃圾回收`机制消除了程序中的`内存泄露`（`memory leak`）问题。
2. Java使用关键字`super`来引用当前`class`所继承的基类。
3. 将方法声明为`final`意味着它不能被继承。
4. 封装是指把`数据成员`和相关的方法都放进一个类中，并使用访问权限来控制其可见性。
5. `单例模式`的作用`保证一个类仅有一个实例，并提供一个全局访问点`。
6. Java不直接支持多继承，但可以通过`接口`实现多继承。
7. 获取一个文件目录下文件列表的方法是`File`类的`listFiles()`方法。
8. Java中的数据类型主要分为`基本类型`和`引用类型`。
9. `Math.round(-11.5)`的返回值是`-11`。
10. `List`接口中查询速度较快的是`ArrayList`类。

## 二、判断正误并说明原因（每题2分，共10分）
1. “`float x1=1.414f;`”语句中等号右边的`f`是多余的，因为`1.414`本身就是`float`类型的值。（）
2. 数组有`length()`方法。（）
3. Java语言的跨平台性使得它不需要提供`sizeof()`运算符。（）
4. `内部类`（`inner class`）可以访问其`外部类`（`enclosing class`）中的`private`成员。（）
5. `构造器`可以被重写（）

## 三、单选题（每题1分，共5分）
1. 下面哪个是Java语言中正确的标识符（）。
A. `5x`
B. `$x`
C. `abc@`
D. `(com`
2. 下列说法错误的是（）：
A. 数组可以动态初始化；
B. 数组可以赋值给`Object`类型的对象；
C. 数组创建以后，其长度可以修改；
D. 数组可以调用`Object`类的所有方法；
3. 假定类`A`有一个方法`void method()`，如果要求能够通过类名`A`直接调用`method()`，则其方法定义应该为（）
A. `static void method()`
B. `public void method()`
C. `final void method()`
D. `abstract void method()`
4. 关于Java中的`多态`，以下说法不正确的为（）。
A. `多态`不仅可以减少代码量，还可以提高代码的可扩展性和可维护性 
B. 把子类转换为父类，称为`向下转型`，自动进行类型转换 
C. `多态`是指同一个实现接口，使用不同的实例而执行不同的操作 
D. `继承`是`多态`的基础，没有`继承`就没有`多态`.
5. 按照指定的格式向文件写入数据，所用的处理流是（）
A. `BufferedReader`
B. `DataInputStream`
C. `DataOutputStream`
D. `ObjectInputStream`

## 四、写出程序运行结果（共20分）
1. `// StaticInitialization.java` （每空1分，共6分）
```java
class Bowl {
    Bowl(int marker) {
        System.out.println("Bowl(" + marker + ")");
    }
}

class Table {
    static Bowl b1 = new Bowl(1);
    Table() {
        System.out.println("Table()");
    }
    Bowl b5 = new Bowl(5);
    static Bowl b2 = new Bowl(2);
}

class Cupboard {
    Bowl b3 = new Bowl(3);
    static Bowl b4 = new Bowl(4);
    Cupboard() {
        System.out.println("Cupboard()");
    }
}

public class StaticInitialization {
    public static void main(String[] args) {
        System.out.println(
                "Creating new Cupboard() in main");
        new Cupboard();
        new Table();
    }
    static Table t2 = new Table();
    static Cupboard t3 = new Cupboard();
}
```
该程序的输出结果为：
2. 以下是`Arrays.java`的源代码： 
```java
public class Arrays {
    public static void main(String[] args) {
        int[] a1 = { 1, 2, 3, 4 };
        int[] a2 = a1;
        for(int i = 0; i < a2.length; i++)
            a2[i]++;
        for(int i = 0; i <= a1.length; i++)
            System.out.println("a1[" + i + "] = " + a1[i]);
    }
}
```
请问该程序执行后的输出是什么？（5分）
3. 请写出输出结果（4分）
```java
public class T1 {
    public static void main(String[] args) {
        T1 a = new T1();
        a.method(8);
        a.method(1.2f);
    }

    void method(float i) {
        System.out.println("float: " + i);
    }

    void method(long i) {
        System.out.println("long: " + i);
    }
}
```
4. `//AlwaysFinally.java` （5分）
```java
class FourException extends Exception {}

public class AlwaysFinally {
    public static void main(String[] args) {
        System.out.println("Entering first try block");
        try {
            System.out.println("Entering second try block");
            try {
                throw new FourException();
            } finally {
                System.out.println("finally in 2nd try block");
            }
        } catch(FourException e) {
            System.out.println("Caught FourException in 1st try block");
        } finally {
            System.out.println("finally in 1st try block");
        }
    }
} 
```
该程序的输出结果为：

## 五、简答题（共20分）
1. 按照要求，补齐代码（5分）
```java
interface Inter { void show(); }
class Outer {
    //请在此处补齐代码 
}
class OuterDemo {
    public static void main(String[] args) {
        Outer.method().show();
    }
}
```
要求在控制台输出"HelloWorld"
2. 请简述`重载`和`重写`的区别？（5分）
3. 在以下代码中，`Parcel`类以`匿名内部类`的方式实现了`Destination`接口，请改用`普通内部类`的方式实现之。（5分）
```java
// Destination.java
public interface Destination {
    String readLabel();
}
// Parcel.java
public class Parcel {
    public Destination dest() {
        return new Destination() {
            private String label = "ABCD";
            public String readLabel() { return label; }
        };
    }
}
```
4. 简述Java中`异常处理`的机制（5分）

## 六、编程题（共35分）
1. 按以下要求编写程序(5分)
    - 创建一个`Rectangle`类，添加`width`和`height`两个成员变量
    - 在`Rectangle`中添加两种方法分别计算矩形的周长和面积
    - 编程利用`Rectangle`输出一个矩形的周长和面积
2. 按以下要求编写程序（5分）
    - 编写`Animal`接口，接口中声明`run()` 方法
    - 定义`Bird`类和`Fish`类实现`Animal`接口
    - 编写`Bird`类和`Fish`类的测试程序，并调用其中的`run()`方法
3. 请设计一个表示电话号码（如`010-68911205`）的类`Phone`，其中设置相应的数据成员，分别用来表示区号（`area`，如`010`）和8位号码（`number`，如`68911205`）。该类包含两个构造函数：第一个为`default constructor`；第二个构造函数的参数应为表示完整电话号码的字符串，函数中使用`String.indexOf()`和`String.substring()`方法或者`java.util.StringTokenizer`类的方法来获取各数据成员的值。类中要求实现相应的`set`和`get`方法来分别设置及获取数据成员的值，并重写`Object.toString()`函数，使之返回完整的电话号码字符串。（6分）
4. 文件`records.dat`中存放着某班学生数学课程的期末考试成绩，每条记录占一行，形如"学号, 姓名, 分数"。请完成以下程序，从文件中逐行读取每个学生的相关数据，并把文件中的每行信息转换成"学号--分数"的形式，存入一个类型为`ArrayList<String>`的容器对象中。接着遍历该容器对象的内容，将其中存放的字符串逐个输出到命令行中。(7分)
```java
import java.io.*;
import java.util.*;
public class ReadRec {
    public static void main(String[] args) throws IOException {
        BufferedReader in = new BufferedReader(new FileReader("records.dat"));
        List<String> l1 = new ArrayList<String>();
        …请在此处填充代码，将程序补充完整…
    }
}
```
5. 创建一个图书类（`Book`），并在该类中定义3个成员变量图书编号（`id`）、图书名称（`name`）以及作者（`author`），使用`单例模式`实现仅能创建`Book`类的3个实例。（5分）
6. 请设计并实现类`QuickSort`，使用递归方法实现`快速排序`算法。`快速排序`的基本思想为：将原问题分解为若干个规模更小但结构与原问题相似的子问题；递归求解这些子问题，然后将这些子问题的解组合为原问题的解。`快速排序`可分为三个步骤，即划分、求解和组合。`QuickSort`类中包含三个方法：`partition`方法用于对待排序数组`r[low…high]`做划分，即以`r[low]`为基准，将所有小于该基准的元素移到其前端，所有大于或等于该基准的元素移到其后端，这样就将该基准放到了最终有序的位置上；`sort`方法用于对数组`r[m…n]`进行递归排序；`quickSort`方法使用前两个方法对类中的数据成员（包含10个元素的`int`数组）进行排序。（7分）

## 答案与解析
### （一）填空题
1. **`垃圾回收`（`Garbage Collection`）**：Java的`垃圾回收机制`自动回收不再被引用的对象所占用的内存，有效避免`内存泄露`。
2. **`super`**：通过`super`关键字可以访问父类的成员，包括属性和方法等。
3. **`final`**：被`final`修饰的方法不能被继承，子类无法对其进行重写。
4. **`数据成员`（或`成员变量`）**：封装就是将数据和操作数据的方法组合在一个类中，并利用访问权限控制外界对其的访问。
5. **`保证一个类仅有一个实例，并提供一个全局访问点`**：在某些场景下，确保类只有一个实例可以避免资源的重复占用和数据不一致等问题。
6. **`接口`（`interface`）**：Java类虽然不能多继承，但一个类可以实现多个接口，从而达到类似多继承的效果。
7. **`File`类的`listFiles()`方法**：使用`File`类创建目录对象后，调用`listFiles()`方法可获取该目录下的文件和子目录列表。
8. **`引用类型`**：Java数据类型分为`基本类型`（如`int`、`float`、`char`等）和`引用类型`（如类、接口、数组等）。
9. **`-11`**：`Math.round()`方法是四舍五入取整，`-11.5`四舍五入后为`-11`。
10. **`ArrayList`**：`ArrayList`基于数组实现，随机访问效率高，适合频繁查询操作；`LinkedList`基于链表实现，插入和删除操作效率较高。

### （二）判断正误并说明原因
1. **错误**：在Java中，`1.414`默认是`double`类型常量，若要赋值给`float`类型变量，必须加上后缀`f`，否则会报错。
2. **错误**：数组有`length`属性，用于获取数组的长度，不是`length()`方法，`length()`方法一般用于`String`类获取字符串长度。
3. **正确**：Java语言跨平台，其数据类型的长度是固定的，不依赖于具体的机器硬件，所以不需要`sizeof()`运算符来获取数据类型的大小。
4. **正确**：`内部类`可以访问`外部类`的所有成员，包括`private`成员，这是`内部类`的特性之一。
5. **错误**：`构造器`不能被重写，因为`构造器`的名称必须与类名相同，且重写要求方法签名（方法名、参数列表）相同，子类`构造器`与父类`构造器`名称不同，所以无法重写。

### （三）单选题
1. **B**：Java标识符可以由字母、数字、下划线（`_`）和美元符号（`$`）组成，但不能以数字开头，也不能是关键字，所以`$x`是正确的标识符。
2. **C**：数组创建后，其长度是固定的，不能修改；数组可以动态初始化、赋值给`Object`类型的对象，也可以调用`Object`类的所有方法。
3. **A**：能通过类名直接调用的方法必须是`静态方法`，用`static`修饰。
4. **B**：把子类转换为父类，称为`向上转型`，是自动进行类型转换；`向下转型`是把父类对象转换为子类对象，需要强制类型转换，且存在风险，所以B选项说法错误。
5. **C**：`DataOutputStream`用于按照指定格式向文件写入基本数据类型的数据；`BufferedReader`用于从字符输入流中读取文本；`DataInputStream`用于从输入流中读取基本数据类型的数据；`ObjectInputStream`用于从输入流中读取对象。

### （四）写出程序运行结果
1. **输出结果**：
```
Bowl(1)
Bowl(2)
Bowl(4)
Creating new Cupboard() in main
Bowl(3)
Cupboard()
Bowl(5)
Table()
Bowl(1)
Bowl(2)
Bowl(5)
Table()
Bowl(3)
Bowl(4)
Cupboard()
```
解析：程序运行时，先加载静态成员。`Table`类的静态成员`b1`和`b2`初始化，输出`Bowl(1)`和`Bowl(2)`；`Cupboard`类的静态成员`b4`初始化，输出`Bowl(4)`。接着执行`main`方法，创建`Cupboard`对象，初始化`b3`，输出`Bowl(3)`，执行`Cupboard`构造方法，输出`Cupboard()`；创建`Table`对象，初始化`b5`，输出`Bowl(5)`，执行`Table`构造方法，输出`Table()`。之后静态成员`t2`和`t3`初始化，重复上述部分过程。
2. **输出结果**：
```
a1[0] = 2
a1[1] = 3
a1[2] = 4
a1[3] = 5
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Index 4 out of bounds for length 4
	at Arrays.main(Arrays.java:7)
```
解析：`a2`和`a1`指向同一个数组，对`a2`元素自增会影响`a1`。第二个`for`循环中，数组下标从`0`到`3`，当`i`为`4`时，会发生`数组越界异常`。
3. **输出结果**：
```
long: 8
float: 1.2
```
解析：方法调用时，根据参数类型选择合适的重载方法。`8`是`int`类型，可自动转换为`long`，调用`method(long i)`；`1.2f`是`float`类型，调用`method(float i)`。
4. **输出结果**：
```
Entering first try block
Entering second try block
finally in 2nd try block
Caught FourException in 1st try block
finally in 1st try block
```
解析：程序进入第一个`try`块，再进入第二个`try`块，抛出异常后，先执行第二个`try`块的`finally`代码块，然后在第一个`try`块的`catch`块捕获异常，最后执行第一个`try`块的`finally`代码块。

### （五）简答题
1. **补齐代码如下**：
```java
interface Inter { void show(); }
class Outer {
    public static Inter method() {
        return new Inter() {
            @Override
            public void show() {
                System.out.println("HelloWorld");
            }
        };
    }
}
class OuterDemo {
    public static void main(String[] args) {
        Outer.method().show();
    }
}
```
解析：在`Outer`类中定义一个静态方法`method`，返回实现了`Inter`接口的`匿名内部类`对象，在`匿名内部类`的`show`方法中输出"HelloWorld"。
2. **`重载`和`重写`的区别如下**：
    - **定义不同**：`重载`是指在同一个类中，方法名相同，但参数列表不同（参数个数、类型或顺序不同）的方法；`重写`是指子类重新实现父类中已有的方法，方法名、参数列表和返回类型都必须相同（返回类型在Java 5.0及以上版本可以是协变的，即子类方法返回值类型是父类方法返回值类型的子类）。
    - **访问权限不同**：`重载`方法的访问权限没有限制；`重写`方法的访问权限不能比父类中被重写方法的访问权限更严格。
    - **多态类型不同**：`重载`体现的是`编译时多态`（`静态多态`），在编译
